# üê≥ Docker Swarm ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Docker Swarm** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–Ω–æ–≥–æ–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.

## üìò –ß—Ç–æ —Ç–∞–∫–æ–µ Docker Swarm?

Swarm ‚Äî —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ Docker –º–µ—Ö–∞–Ω–∏–∑–º –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ (–∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏), –ø–æ–∑–≤–æ–ª—è—é—â–∏–π:

- –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–∞–∫ —Å—Ç–µ–∫ (`docker stack deploy`)
- –†–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —É–∑–ª–∞–º
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è

## ‚öôÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤

| –°–∫—Ä–∏–ø—Ç                  | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------------------------|------------|
| `init-swarm.sh`         | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä Swarm –Ω–∞ —Ç–µ–∫—É—â–µ–º —É–∑–ª–µ (–º–µ–Ω–µ–¥–∂–µ—Ä–µ) |
| `join-swarm.sh`         | –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç —Ç–µ–∫—É—â—É—é –º–∞—à–∏–Ω—É –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –∫–ª–∞—Å—Ç–µ—Ä—É –∫–∞–∫ worker –∏–ª–∏ manager |
| `create-overlay-network.sh` | –°–æ–∑–¥–∞—ë—Ç overlay-—Å–µ—Ç—å (–æ–±—â—É—é —Å–µ—Ç—å –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ —Å—Ç–µ–∫–µ) |
| `deploy-stack.sh`       | –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Å—Ç–µ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏–∑ `docker-stack.yml` |

## üìã –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### üü¢ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞ (–Ω–∞ –ø–µ—Ä–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ):
```bash
./scripts/swarm/init-swarm.sh
./scripts/swarm/create-overlay-network.sh
./scripts/swarm/deploy-stack.sh my-stack
```

### üîó –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞:
1. –ù–∞ –ø–µ—Ä–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ (–º–µ–Ω–µ–¥–∂–µ—Ä–µ):
```bash
docker swarm join-token worker
```
2. –ù–∞ –≤—Ç–æ—Ä–æ–º —Å–µ—Ä–≤–µ—Ä–µ (worker):
```bash
./scripts/swarm/join-swarm.sh
```

### üöÄ –î–µ–ø–ª–æ–π –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–µ–∫–∞:
```bash
./scripts/swarm/deploy-stack.sh my-stack
```

## üõ† –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞:
```bash
docker node ls
```
- –°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ —Å—Ç–µ–∫–µ:
```bash
docker stack services my-stack
```
- –õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
docker service logs my-stack_my-service
```
- –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–µ–∫–∞:
```bash
docker stack rm my-stack
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Cloudflare API Token (–¥–ª—è Traefik), —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º:
- –•—Ä–∞–Ω–∏—Ç—å –µ–≥–æ –≤ .env
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `docker secret` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [üìò –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Docker Swarm (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è)](https://docs.docker.com/engine/swarm/)
- [üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å –∫–ª–∞—Å—Ç–µ—Ä–æ–º Swarm](https://docs.docker.com/engine/swarm/swarm-tutorial/create-swarm/)
- [üì¶ –†–∞–±–æ—Ç–∞ —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏ —Å—Ç–µ–∫–∞–º–∏](https://docs.docker.com/engine/swarm/how-swarm-mode-works/services/)
- [üß∞ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–º–∞–Ω–¥ CLI](https://docs.docker.com/engine/reference/commandline/swarm/)
